---
title: Practical Guide to Static Site Generation with NextJs
featured_image: ''
draft: true
og_image: ''
description: Build a low cost blog with NextJs and Wordpress API
author: John Oba - Afrodev
date: 24 March, 2023
read_time: "5"

---
If you're tired of hearing the term "Jamstack" but still curious about what it means, don't worry! We'll explain it in a simple way.

We'll be creating a basic blog that is affordable to run, fast, and secure. We'll use NextJS to generate the website statically, and we'll get our blog posts from the public API of WordPress.

> A basic understanding of JavaScript and React will be helpful in following along

Server Side Rendering and Static Site Generation are two modern approaches to building web applications that are fast, efficient, and optimized for search engines. By moving some of the workloads from the client's browser to the server, these techniques help to reduce the overall page load time and improve the user experience.

## Requirement

* [NextJs](https://nextjs.org)
* Node v14.6 or newer
* npx

npx just like npm is an ePackage runner. It runs hosted packages from the npm registry. We'll be using npx to install NextJs

    npx create-next-app@latest <project-name>

`create-next-app` is a package hosted on the registry, here we ran that package using npx.

Feel free to name your project as you like. I‚Äôll name this leccel-blog.

    npx create-next-app@latest leccel-blog --typescript

On the CLI, I selected all the default configurations. (Hit "Enter" to keep going").

When the installation is complete run

`cd leccel-blog && code .`

We can start the development server and preview the default app in the browser.

`npm run dev`

Our default NextJs app is running on the browser. everything working as expected and our focus directory is the `pages` directory where all our routes point to the `index.tsx`. A second page is required to show the post detail when clicked. We can name this page `[slug].tsx` . This is how dynamic routes are created in NextJs. We‚Äôll also move this new file into a `posts` folder. The new pages structures looks more like this

    üìÅ pages
       |__ index.tsx
       |
       |__ üìÇ posts
            |___[slug].tsx

After removing all that we don't need from `pages/index.tsx` it took this shape

```tsx
import Head from 'next/head'
import styles from '@/styles/Home.module.css'


export default function Home() {
 return (
   <>
     <Head>
       <title>Leccel Blog</title>
       <meta name="description" content="A practical guide to Jamstack" />
       <meta name="viewport" content="width=device-width, initial-scale=1" />
       <link rel="icon" href="/favicon.ico" />
     </Head>
     <main className={styles.main}>
       
     </main>
   </>
 )
}
```

## Choosing a cms

Jamstack applications rely on content APIs for their dynamic content. There are many CMS options to choose from, including Strapi, Contentful, and Sanity. Choose a CMS that best fits your needs and integrate it with your NextJS project.

![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3bb43fd7-41f8-4249-9312-fba50a1cd76f_1328x1510.png)[find the full list here](https://jamstacktools.org/browse/headless-cms "CMS list")

I'll be using a [Wordpress.com API](https://developer.wordpress.com/docs/api/) as a CMS for our blog.  
Our blog page need to fetch the list of blog posts from the CMS and display in the index page.

```typescript
export default function Home({ posts }) {
  return (
    <ul>
      {posts.map((post) => (
        <li>{post.title}</li>
      ))}
    </ul>
  )
}
```

To retrieve data before rendering, Next.js provides a way to export an async function called `getStaticProps` from the same file. This function is executed during the build process and allows you to send the retrieved data as props to the page for pre-rendering.

Here's what it looks like

```typescript
// This function gets called at build time
export async function getStaticProps() {
  // Call the wordpress.com API endpoint to get posts
  const res = await fetch(
    "https://public-api.wordpress.com/rest/v1/sites/200671771/posts"
  );
  const posts = await res.json()

  // By returning { props: { posts } }, the Home component
  // will receive `posts` as a prop at build time
  return {
    props: {
      posts,
    },
  }
}
```